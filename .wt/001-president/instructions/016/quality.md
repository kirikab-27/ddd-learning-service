# Quality: Chapter 8 集約の検証

## Task Overview
Frontend1が作成したChapter 8「集約」の3レッスンとクイズが正しく動作することを確認する。

## 技術要件

| 項目 | 指定技術 |
|------|----------|
| スタイリング | Tailwind CSS（CSS Modules禁止） |
| テスト | Vitest |

## 確認手順

### 1. 開発サーバーの起動確認

```bash
# サーバーが起動していることを確認
curl http://localhost:3000
```

### 2. Chapter 8 レッスンの確認

以下のURLを順番に開き、表示とスタイルを確認:

#### Lesson 8-1: 集約とは
```
http://localhost:3000/courses/ddd-practice/chapters/chapter-8/lessons/lesson-8-1
```

**確認項目:**
- [ ] タイトル「集約とは」が表示される
- [ ] 概要セクションが表示される
- [ ] 集約の定義が説明されている
- [ ] 整合性の境界について説明されている
- [ ] 不変条件について説明されている
- [ ] 注文と注文明細の例がある
- [ ] トランザクション境界の説明がある
- [ ] Mermaid図解が表示される（最低3つ）
  - 集約の境界を示す図
  - 整合性が壊れる例 vs 保護される例
  - トランザクション境界の図
- [ ] TypeScriptコード例が表示される
- [ ] シンタックスハイライトが適用されている
- [ ] まとめセクションがある

#### Lesson 8-2: 集約ルート
```
http://localhost:3000/courses/ddd-practice/chapters/chapter-8/lessons/lesson-8-2
```

**確認項目:**
- [ ] タイトル「集約ルート」が表示される
- [ ] 集約ルートの定義が説明されている
- [ ] 外部アクセスの制限について説明されている
- [ ] 集約ルートが提供すべきメソッドが説明されている
- [ ] 注文集約の実装例がある
- [ ] よくある間違いの説明がある
- [ ] Mermaid図解が表示される（最低3つ）
  - classDiagram（集約ルートと内部エンティティ）
  - 正しいアクセス vs 誤ったアクセス
  - 集約ルートのメソッド設計
- [ ] TypeScriptコード例が表示される
- [ ] まとめセクションがある

#### Lesson 8-3: 集約の設計ガイドライン
```
http://localhost:3000/courses/ddd-practice/chapters/chapter-8/lessons/lesson-8-3
```

**確認項目:**
- [ ] タイトル「集約の設計ガイドライン」が表示される
- [ ] 小さな集約を優先する原則の説明がある
- [ ] トランザクション整合性 vs 結果整合性の説明がある
- [ ] 集約間の参照方法（ID参照）の説明がある
- [ ] 大きすぎる集約の例と問題点がある
- [ ] 集約の分割/統合の判断基準の表がある
- [ ] イベント駆動の集約間連携の説明がある
- [ ] 集約設計のチェックリストがある
- [ ] Mermaid図解が表示される（最低4つ）
  - 大きな集約 vs 小さな集約
  - 集約間の参照パターン
  - イベント駆動連携（sequenceDiagram）
  - 集約設計の決定木
- [ ] TypeScriptコード例が複数ある
- [ ] まとめセクションがある

### 3. スタイル確認

各レッスンページで以下を確認:

| 要素 | 期待される表示 | Lesson 8-1 | Lesson 8-2 | Lesson 8-3 |
|------|--------------|-----------|-----------|-----------|
| H1 | 表示されない（重複削除） | ✅/❌ | ✅/❌ | ✅/❌ |
| H2 | text-2xl、太字、上12下6マージン、下ボーダー | ✅/❌ | ✅/❌ | ✅/❌ |
| H3 | text-xl、太字、上10下4マージン | ✅/❌ | ✅/❌ | ✅/❌ |
| 段落 | 下6マージン、行間広い | ✅/❌ | ✅/❌ | ✅/❌ |
| リスト | 項目間スペース（space-y-2） | ✅/❌ | ✅/❌ | ✅/❌ |
| コードブロック | 上6下8マージン、シンタックスハイライト | ✅/❌ | ✅/❌ | ✅/❌ |
| テーブル | ボーダー、背景色、ホバー効果 | ✅/❌ | ✅/❌ | ✅/❌ |
| 引用 | 左青ボーダー、背景色 | ✅/❌ | ✅/❌ | ✅/❌ |
| インラインコード | 背景色、パディング、角丸 | ✅/❌ | ✅/❌ | ✅/❌ |
| Mermaid図解 | 暗い背景、中央揃え、スクロール可能 | ✅/❌ | ✅/❌ | ✅/❌ |

### 4. Mermaid図解の動作確認

各レッスンで以下のMermaid図形式が正しく表示されることを確認:

**Lesson 8-1:**
- [ ] graph TD（集約の境界）
- [ ] graph TD/LR（整合性の保護）
- [ ] graph TD（トランザクション境界）

**Lesson 8-2:**
- [ ] classDiagram（集約ルートの構造）
- [ ] graph LR（アクセスパターン）
- [ ] graph TD（メソッド設計）

**Lesson 8-3:**
- [ ] graph TD（集約サイズ比較）
- [ ] classDiagram（集約間参照）
- [ ] sequenceDiagram（イベント駆動連携）
- [ ] graph TD（設計の決定木）

### 5. クイズ動作確認

#### Lesson 8-1 のクイズ（5問）

各レッスンページ下部の「クイズに挑戦」ボタンをクリックし、以下を確認:

- [ ] クイズが5問表示される
- [ ] 各問題に4つの選択肢がある
- [ ] 選択肢をクリックできる
- [ ] 正解/不正解が判定される
- [ ] 解説が表示される
- [ ] 次の問題に進める
- [ ] 最終結果が表示される（正答率）

**確認する問題テーマ:**
- [ ] 集約の主な目的
- [ ] 不変条件の定義
- [ ] トランザクション境界
- [ ] 集約の具体例
- [ ] 複数集約の更新方法

#### Lesson 8-2 のクイズ（5問）

- [ ] 集約ルートの役割
- [ ] 外部アクセス制限の理由
- [ ] 内部エンティティへのアクセス
- [ ] 集約ルートのメソッド
- [ ] ReadonlyArrayの使用

#### Lesson 8-3 のクイズ（5問）

- [ ] 小さな集約の利点
- [ ] 整合性の種類
- [ ] 集約間参照の方法
- [ ] 大きな集約の問題
- [ ] 設計の判断基準

### 6. ナビゲーション確認

- [ ] コース詳細ページ（/courses/ddd-practice）にChapter 8が表示される
- [ ] Chapter 8のタイトル「集約」が表示される
- [ ] 3つのレッスンが順番に表示される
- [ ] 各レッスンの説明が表示される
- [ ] レッスンをクリックすると該当ページに遷移する
- [ ] 前後のレッスンへのナビゲーションが動作する

### 7. レスポンシブ確認

各画面サイズでLesson 8-2をサンプリング確認:

```bash
# デスクトップ（1920px）
# タブレット（768px）
# モバイル（375px）
```

確認項目:
- [ ] テキストが読める
- [ ] コードブロックが横スクロール可能
- [ ] テーブルが横スクロール可能
- [ ] Mermaid図解が横スクロール可能
- [ ] レイアウト崩れなし

### 8. コンテンツ品質確認

#### 技術的正確性
- [ ] DDD用語が正しく使われている
- [ ] コード例がTypeScriptの型を適切に使用している
- [ ] 不変条件の説明が正確
- [ ] トランザクション整合性と結果整合性の違いが明確

#### 学習効果
- [ ] 初学者にもわかりやすい説明
- [ ] 具体例が豊富
- [ ] 図解が理解を助ける
- [ ] コード例が実践的
- [ ] よくある間違いが示されている

#### 一貫性
- [ ] Chapter 5, 6, 7との整合性がある
- [ ] 用語が統一されている
- [ ] スタイルが統一されている

### 9. テスト実行

```bash
npm run test
npm run type-check
```

**確認項目:**
- [ ] 全テストがパス
- [ ] 型エラーなし
- [ ] ビルドエラーなし

### 10. 問題がある場合の対応

問題を発見した場合:

1. **スクリーンショットを撮影**
2. **問題の詳細を記録**:
   - レッスンID
   - 問題の要素（Mermaid図解、コード例、クイズなど）
   - 期待される表示/動作
   - 実際の表示/動作
3. **再現手順を記録**
4. **修正が必要か判断**
5. **必要に応じてFrontend1に修正依頼**

---

## Definition of Done

- [ ] 全3レッスンの表示確認完了
- [ ] 全15問のクイズ動作確認完了
- [ ] スタイルチェックリスト全項目確認完了
- [ ] Mermaid図解が正しく表示される
- [ ] レスポンシブ対応確認完了
- [ ] コンテンツ品質確認完了
- [ ] 全テストがパス
- [ ] 型チェックがパス
- [ ] 問題があれば修正完了またはBoss1に報告完了

---

## Communication

完了時:
```bash
./scripts/agent-send.sh boss1 "[DONE] Ticket 016 Quality完了。Chapter 8の全3レッスン+クイズ15問の検証が完了しました。全て正常に動作しています。"
```

問題発見時:
```bash
./scripts/agent-send.sh boss1 "[ISSUE] Ticket 016 Qualityで問題を発見しました。[問題の詳細と該当レッスン]"
```

---

## Reference

- README.md: Ticket全体概要
- frontend1.md: Frontend1の作業内容
- MarkdownRenderer.tsx: スタイル実装
- Ticket 015: 前回の検証パターン
